:root{
  --bg:#0b1020;
  --panel:#121a33;
  --line:#2a3766;
  --text:#e8ecff;
  --muted:#9aa6d6;
  --danger:#ff3b3b;
  --dark:#111;
  --ok:#58ff8a;
}

*{ box-sizing:border-box; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans JP", sans-serif;
  background: radial-gradient(
    1200px 700px at 50% 10%,
    #4354b2 0%,   
    #4a60a5 55%,  
    #303c6b 100%  
  );
  color:#e8ecff;
  user-select:none;
  overflow:hidden;
}


header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 16px;
  gap:12px;
}

.hud{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}

.pill{
  background: rgba(18, 26, 51, 0.85);
  border:1px solid rgba(42, 55, 102, 0.9);
  padding:8px 10px;
  border-radius:999px;
  font-size:14px;
  color: var(--text);
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
}
.pill b{ color:#fff; }

button{
  cursor:pointer;
  background: linear-gradient(180deg, #2c3a79, #1b2552);
  border:1px solid rgba(42, 55, 102, 0.9);
  color:var(--text);
  padding:9px 12px;
  border-radius:12px;
  font-weight:700;
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
}
button:hover{ filter:brightness(1.08); }
button:active{ transform: translateY(1px); }

#stage{
  position:relative;
  width: min(1100px, 96vw);
  height: min(640px, 78vh);
  margin: 0 auto 14px auto;
  background: linear-gradient(180deg, rgba(18,26,51,.7), rgba(10,14,28,.7));
  border:1px solid rgba(42, 55, 102, 0.9);
  border-radius: 24px;
  overflow:hidden;
  box-shadow: 0 22px 60px rgba(0,0,0,.45);
}

/* 左右ゴール */
.goal{
  position:absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 170px;
  height: 300px;
  border-radius: 22px;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:14px;
}
.goal .frame{
  width: 100%;
  height: 100%;
  border-radius: 18px;
  border: 6px solid rgba(255,255,255,.12);
  box-shadow: inset 0 0 0 3px rgba(0,0,0,.35);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  letter-spacing:.08em;
  font-size:18px;
  color:rgba(255,255,255,.9);
  text-shadow: 0 2px 10px rgba(0,0,0,.4);
}

#goalRed{
  left: 18px;
  background: rgba(255, 59, 59, .12);
  border: 1px solid rgba(255, 59, 59, .35);
}
#goalRed .frame{
  border-color: rgba(255, 59, 59, .55);
}

#goalBlack{
  right: 18px;
  background: rgba(0,0,0, .18);
  border: 1px solid rgba(255,255,255,.12);
}
#goalBlack .frame{
  border-color: rgba(255,255,255,.22);
}

/* 上下ライン */
.spawn-line{
  position:absolute;
  left: 50%;
  transform: translateX(-50%);
  width: 60%;
  height: 32px;
  border-radius: 999px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 12px;
  letter-spacing: .25em;
  color: rgba(255,255,255,.35);
  border: 1px dashed rgba(255,255,255,.18);
  background: rgba(255,255,255,.04);
}
.spawn-line.top{ top: 16px; }
.spawn-line.bottom{ bottom: 16px; }

/* ボム（画像表示） */
.bomb{
  position:absolute;
  width: 74px;
  height: 74px;
  cursor: grab;
  touch-action:none;

  /* 画像を背景として表示 */
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
}

.bomb:active{ cursor: grabbing; }

.bomb.red{
  background-image: url("../img/red_bomb.png");
}

.bomb.black{
  background-image: url("../img/black_bomb.png");
}

/* ===== 残り1/3で点滅（色別） ===== */

/* 赤ボム：激しく・危険感 */
.bomb.red.blink{
  animation: redBlink 0.15s linear infinite;
  filter:
    drop-shadow(0 0 10px rgba(255, 60, 60, .9))
    drop-shadow(0 0 20px rgba(255, 0, 0, .7));
}

@keyframes redBlink{
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: .35;
    transform: scale(1.08);
  }
}

/* 黒ボム：不気味・警告感（白く光る） */
.bomb.black.blink{
  animation: blackBlink 0.35s ease-in-out infinite;
  filter:
    drop-shadow(0 0 6px rgba(255,255,255,.6))
    drop-shadow(0 0 14px rgba(255,255,255,.4));
}

@keyframes blackBlink{
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: .55;
  }
}

/* 爆発エフェクト */
.explode{
  animation: boom .45s ease-out forwards;
}
@keyframes boom{
  0%{ transform: scale(1); filter:brightness(1); }
  40%{ transform: scale(1.25); filter:brightness(1.35); }
  100%{ transform: scale(0); opacity:0; filter:brightness(2); }
}

/* オーバーレイ */
.overlay{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.55);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: 999;
}
.hidden{ display:none; }

.modal{
  width: min(520px, 92%);
  background: rgba(18, 26, 51, 0.92);
  border: 1px solid rgba(42, 55, 102, 0.9);
  border-radius: 22px;
  padding: 18px 18px 16px;
  box-shadow: 0 24px 80px rgba(0,0,0,.55);
  text-align:center;
}
.modal h2{
  margin: 6px 0 8px;
  font-size: 24px;
}
.reason{
  margin: 0 0 12px;
  color: var(--muted);
}
.hint{
  margin: 0 0 12px;
  color: rgba(255,255,255,.45);
  font-size: 13px;
}